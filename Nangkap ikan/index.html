<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Fish Pond - Interactive</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: radial-gradient(circle, #1a3a4a 0%, #0a1921 100%);
            font-family: 'Segoe UI', sans-serif;
        }

        /* Instruksi Overlay */
        .ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: rgba(255, 255, 255, 0.5);
            pointer-events: none;
            letter-spacing: 1px;
        }

        canvas {
            display: block;
        }

        /* Efek Air Ripple */
        .ripple {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            pointer-events: none;
            animation: ripple-ani 2s linear infinite;
        }

        @keyframes ripple-ani {
            from { width: 0; height: 0; opacity: 0.5; transform: translate(-50%, -50%); }
            to { width: 500px; height: 500px; opacity: 0; transform: translate(-50%, -50%); }
        }
    </style>
</head>
<body>

    <div class="ui">
        <h2>Zen Pond</h2>
        <p>Gerakkan kursor untuk memanggil ikan.<br>Klik untuk membuat riak air.</p>
    </div>

    <canvas id="pond"></canvas>

    <script>
        const canvas = document.getElementById('pond');
        const ctx = canvas.getContext('2d');

        let width, height;
        let fishes = [];
        const mouse = { x: -1000, y: -1000 };

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resize);
        window.addEventListener('mousemove', e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        // Membuat efek riak saat klik
        window.addEventListener('mousedown', e => {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = e.clientX + 'px';
            ripple.style.top = e.clientY + 'px';
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 2000);
        });

        class Fish {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.angle = Math.random() * Math.PI * 2;
                this.velocity = 1 + Math.random() * 2;
                this.color = `hsl(${Math.random() * 20 + 10}, 80%, 60%)`; // Warna ikan Koi (Oranye/Kuning)
                this.size = 5 + Math.random() * 8;
                this.history = [];
            }

            update() {
                // Kejar kursor jika dekat
                const dx = mouse.x - this.x;
                const dy = mouse.y - this.y;
                const dist = Math.sqrt(dx*dx + dy*dy);

                if (dist < 300) {
                    const targetAngle = Math.atan2(dy, dx);
                    let diff = targetAngle - this.angle;
                    while (diff < -Math.PI) diff += Math.PI * 2;
                    while (diff > Math.PI) diff -= Math.PI * 2;
                    this.angle += diff * 0.05;
                    this.velocity = 3; 
                } else {
                    this.angle += Math.sin(Date.now() * 0.001 + this.x) * 0.02;
                    this.velocity = 1.5;
                }

                this.x += Math.cos(this.angle) * this.velocity;
                this.y += Math.sin(this.angle) * this.velocity;

                // Pantulan dinding
                if (this.x < -50) this.x = width + 50;
                if (this.x > width + 50) this.x = -50;
                if (this.y < -50) this.y = height + 50;
                if (this.y > height + 50) this.y = -50;

                // Jejak badan ikan (Tail effect)
                this.history.push({x: this.x, y: this.y});
                if (this.history.length > 15) this.history.shift();
            }

            draw() {
                ctx.beginPath();
                ctx.strokeStyle = this.color;
                ctx.lineWidth = this.size;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';

                for (let i = 0; i < this.history.length; i++) {
                    const pos = this.history[i];
                    ctx.lineTo(pos.x, pos.y);
                }
                ctx.stroke();

                // Kepala ikan
                ctx.beginPath();
                ctx.fillStyle = "#fff";
                ctx.arc(this.x, this.y, this.size/2, 0, Math.PI*2);
                ctx.fill();
            }
        }

        function init() {
            resize();
            for (let i = 0; i < 20; i++) {
                fishes.push(new Fish());
            }
            animate();
        }

        function animate() {
            // Efek air (semi-transparan untuk trail)
            ctx.fillStyle = 'rgba(10, 25, 33, 0.2)';
            ctx.fillRect(0, 0, width, height);

            fishes.forEach(fish => {
                fish.update();
                fish.draw();
            });

            requestAnimationFrame(animate);
        }

        init();
    </script>
</body>
</html>